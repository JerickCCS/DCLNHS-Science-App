import{m as c,A as f,C as l,F as s}from"./index-CmL3c1Ml.js";import{T as p}from"./lessonBackground.css_vue_type_style_index_0_src_true_lang-BPnM_jjp.js";function g(){const a=c(!1),i=c(""),o=async e=>{if(e)try{if(l.getPlatform()!=="web")await p.speak({text:e,lang:"en-US",rate:1,pitch:1});else if("speechSynthesis"in window){const n=window.speechSynthesis;n.cancel();const t=new SpeechSynthesisUtterance(e);t.lang="en-US",t.rate=1,t.pitch=1,t.onend=()=>{a.value=!1,s.restoreBg()},n.speak(t)}}catch(n){console.warn("Error during TTS:",n),a.value=!1,s.restoreBg()}},r=async()=>{try{l.getPlatform()!=="web"?await p.stop():"speechSynthesis"in window&&window.speechSynthesis.cancel()}catch(e){console.warn("Error stopping TTS:",e)}finally{a.value=!1,s.restoreBg()}},u=async e=>{if(!e)return;if(a.value){await r();return}const n=document.createElement("div");n.innerHTML=e;const t=n.innerText?.trim();t&&(i.value=t,a.value=!0,s.duckBg(),await o(t))};return f.addListener("appStateChange",({isActive:e})=>{e||r()}),{isPlaying:a,textToRead:i,speakText:o,stopSpeaking:r,toggleAudio:u}}export{g as u};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlVFRTLUM5NUJYem5PLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY29tcG9zYWJsZXMvdXNlVFRTLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlZiB9IGZyb20gXCJ2dWVcIlxyXG5pbXBvcnQgeyBDYXBhY2l0b3IgfSBmcm9tIFwiQGNhcGFjaXRvci9jb3JlXCJcclxuaW1wb3J0IHsgVGV4dFRvU3BlZWNoIH0gZnJvbSBcIkBjYXBhY2l0b3ItY29tbXVuaXR5L3RleHQtdG8tc3BlZWNoXCJcclxuaW1wb3J0IHsgQXBwIH0gZnJvbSBcIkBjYXBhY2l0b3IvYXBwXCJcclxuaW1wb3J0IHsgYXVkaW9NYW5hZ2VyIH0gZnJvbSBcInNyYy91dGlscy9hdWRpb01hbmFnZXJcIlxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVzZVRUUygpIHtcclxuICAgIGNvbnN0IGlzUGxheWluZyA9IHJlZihmYWxzZSlcclxuICAgIGNvbnN0IHRleHRUb1JlYWQgPSByZWYoXCJcIilcclxuXHJcbiAgICBjb25zdCBzcGVha1RleHQgPSBhc3luYyAodGV4dCkgPT4ge1xyXG4gICAgICAgIGlmICghdGV4dCkgcmV0dXJuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKENhcGFjaXRvci5nZXRQbGF0Zm9ybSgpICE9PSBcIndlYlwiKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBUZXh0VG9TcGVlY2guc3BlYWsoe1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFuZzogXCJlbi1VU1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIHJhdGU6IDEuMCxcclxuICAgICAgICAgICAgICAgICAgICBwaXRjaDogMS4wXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFwic3BlZWNoU3ludGhlc2lzXCIgaW4gd2luZG93KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzeW50aCA9IHdpbmRvdy5zcGVlY2hTeW50aGVzaXNcclxuICAgICAgICAgICAgICAgIHN5bnRoLmNhbmNlbCgpXHJcbiAgICAgICAgICAgICAgICBjb25zdCB1dHRlciA9IG5ldyBTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UodGV4dClcclxuICAgICAgICAgICAgICAgIHV0dGVyLmxhbmcgPSBcImVuLVVTXCJcclxuICAgICAgICAgICAgICAgIHV0dGVyLnJhdGUgPSAxLjBcclxuICAgICAgICAgICAgICAgIHV0dGVyLnBpdGNoID0gMS4wXHJcbiAgICAgICAgICAgICAgICB1dHRlci5vbmVuZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpc1BsYXlpbmcudmFsdWUgPSBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvTWFuYWdlci5yZXN0b3JlQmcoKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc3ludGguc3BlYWsodXR0ZXIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiRXJyb3IgZHVyaW5nIFRUUzpcIiwgZXJyKVxyXG4gICAgICAgICAgICBpc1BsYXlpbmcudmFsdWUgPSBmYWxzZVxyXG4gICAgICAgICAgICBhdWRpb01hbmFnZXIucmVzdG9yZUJnKClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc3RvcFNwZWFraW5nID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChDYXBhY2l0b3IuZ2V0UGxhdGZvcm0oKSAhPT0gXCJ3ZWJcIikge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgVGV4dFRvU3BlZWNoLnN0b3AoKVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFwic3BlZWNoU3ludGhlc2lzXCIgaW4gd2luZG93KSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuc3BlZWNoU3ludGhlc2lzLmNhbmNlbCgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiRXJyb3Igc3RvcHBpbmcgVFRTOlwiLCBlcnIpXHJcbiAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgaXNQbGF5aW5nLnZhbHVlID0gZmFsc2VcclxuICAgICAgICAgICAgYXVkaW9NYW5hZ2VyLnJlc3RvcmVCZygpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHRvZ2dsZUF1ZGlvID0gYXN5bmMgKHBhZ2VDb250ZW50KSA9PiB7XHJcbiAgICAgICAgaWYgKCFwYWdlQ29udGVudCkgcmV0dXJuXHJcblxyXG4gICAgICAgIGlmIChpc1BsYXlpbmcudmFsdWUpIHtcclxuICAgICAgICAgICAgYXdhaXQgc3RvcFNwZWFraW5nKClcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB0ZW1wRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxyXG4gICAgICAgIHRlbXBEaXYuaW5uZXJIVE1MID0gcGFnZUNvbnRlbnRcclxuICAgICAgICBjb25zdCB0ZXh0ID0gdGVtcERpdi5pbm5lclRleHQ/LnRyaW0oKVxyXG4gICAgICAgIGlmICghdGV4dCkgcmV0dXJuXHJcblxyXG4gICAgICAgIHRleHRUb1JlYWQudmFsdWUgPSB0ZXh0XHJcbiAgICAgICAgaXNQbGF5aW5nLnZhbHVlID0gdHJ1ZVxyXG4gICAgICAgIGF1ZGlvTWFuYWdlci5kdWNrQmcoKVxyXG4gICAgICAgIGF3YWl0IHNwZWFrVGV4dCh0ZXh0KVxyXG4gICAgfVxyXG5cclxuICAgIC8vIPCflLQgQ1JJVElDQUwgRklYIEZPUiBBUEtcclxuICAgIEFwcC5hZGRMaXN0ZW5lcihcImFwcFN0YXRlQ2hhbmdlXCIsICh7IGlzQWN0aXZlIH0pID0+IHtcclxuICAgICAgICBpZiAoIWlzQWN0aXZlKSB7XHJcbiAgICAgICAgICAgIHN0b3BTcGVha2luZygpXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICByZXR1cm4geyBpc1BsYXlpbmcsIHRleHRUb1JlYWQsIHNwZWFrVGV4dCwgc3RvcFNwZWFraW5nLCB0b2dnbGVBdWRpbyB9XHJcbn1cclxuIl0sIm5hbWVzIjpbInVzZVRUUyIsImlzUGxheWluZyIsInJlZiIsInRleHRUb1JlYWQiLCJzcGVha1RleHQiLCJ0ZXh0IiwiQ2FwYWNpdG9yIiwiVGV4dFRvU3BlZWNoIiwic3ludGgiLCJ1dHRlciIsImF1ZGlvTWFuYWdlciIsImVyciIsInN0b3BTcGVha2luZyIsInRvZ2dsZUF1ZGlvIiwicGFnZUNvbnRlbnQiLCJ0ZW1wRGl2IiwiQXBwIiwiaXNBY3RpdmUiXSwibWFwcGluZ3MiOiJ5SkFNTyxTQUFTQSxHQUFTLENBQ3JCLE1BQU1DLEVBQVlDLEVBQUksRUFBSyxFQUNyQkMsRUFBYUQsRUFBSSxFQUFFLEVBRW5CRSxFQUFZLE1BQU9DLEdBQVMsQ0FDOUIsR0FBS0EsRUFDTCxHQUFJLENBQ0EsR0FBSUMsRUFBVSxZQUFXLElBQU8sTUFDNUIsTUFBTUMsRUFBYSxNQUFNLENBQ3JCLEtBQUFGLEVBQ0EsS0FBTSxRQUNOLEtBQU0sRUFDTixNQUFPLENBQzNCLENBQWlCLFVBQ00sb0JBQXFCLE9BQVEsQ0FDcEMsTUFBTUcsRUFBUSxPQUFPLGdCQUNyQkEsRUFBTSxPQUFNLEVBQ1osTUFBTUMsRUFBUSxJQUFJLHlCQUF5QkosQ0FBSSxFQUMvQ0ksRUFBTSxLQUFPLFFBQ2JBLEVBQU0sS0FBTyxFQUNiQSxFQUFNLE1BQVEsRUFDZEEsRUFBTSxNQUFRLElBQU0sQ0FDaEJSLEVBQVUsTUFBUSxHQUNsQlMsRUFBYSxVQUFTLENBQzFCLEVBQ0FGLEVBQU0sTUFBTUMsQ0FBSyxDQUNyQixDQUNKLE9BQVNFLEVBQUssQ0FDVixRQUFRLEtBQUssb0JBQXFCQSxDQUFHLEVBQ3JDVixFQUFVLE1BQVEsR0FDbEJTLEVBQWEsVUFBUyxDQUMxQixDQUNKLEVBRU1FLEVBQWUsU0FBWSxDQUM3QixHQUFJLENBQ0lOLEVBQVUsWUFBVyxJQUFPLE1BQzVCLE1BQU1DLEVBQWEsS0FBSSxFQUNoQixvQkFBcUIsUUFDNUIsT0FBTyxnQkFBZ0IsT0FBTSxDQUVyQyxPQUFTSSxFQUFLLENBQ1YsUUFBUSxLQUFLLHNCQUF1QkEsQ0FBRyxDQUMzQyxRQUFDLENBQ0dWLEVBQVUsTUFBUSxHQUNsQlMsRUFBYSxVQUFTLENBQzFCLENBQ0osRUFFTUcsRUFBYyxNQUFPQyxHQUFnQixDQUN2QyxHQUFJLENBQUNBLEVBQWEsT0FFbEIsR0FBSWIsRUFBVSxNQUFPLENBQ2pCLE1BQU1XLEVBQVksRUFDbEIsTUFDSixDQUVBLE1BQU1HLEVBQVUsU0FBUyxjQUFjLEtBQUssRUFDNUNBLEVBQVEsVUFBWUQsRUFDcEIsTUFBTVQsRUFBT1UsRUFBUSxXQUFXLEtBQUksRUFDL0JWLElBRUxGLEVBQVcsTUFBUUUsRUFDbkJKLEVBQVUsTUFBUSxHQUNsQlMsRUFBYSxPQUFNLEVBQ25CLE1BQU1OLEVBQVVDLENBQUksRUFDeEIsRUFHQSxPQUFBVyxFQUFJLFlBQVksaUJBQWtCLENBQUMsQ0FBRSxTQUFBQyxDQUFRLElBQU8sQ0FDM0NBLEdBQ0RMLEVBQVksQ0FFcEIsQ0FBQyxFQUVNLENBQUUsVUFBQVgsRUFBVyxXQUFBRSxFQUFZLFVBQUFDLEVBQVcsYUFBQVEsRUFBYyxZQUFBQyxDQUFXLENBQ3hFIn0=
