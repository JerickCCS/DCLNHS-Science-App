import{W as p}from"./index-CmL3c1Ml.js";class g extends p{constructor(){super(),this.speechSynthesis=null,"speechSynthesis"in window&&(this.speechSynthesis=window.speechSynthesis,window.addEventListener("beforeunload",()=>{this.stop()}))}async speak(t){this.speechSynthesis||this.throwUnsupportedError(),await this.stop();const o=this.speechSynthesis,e=this.createSpeechSynthesisUtterance(t);return new Promise((i,n)=>{e.onend=()=>{i()},e.onerror=s=>{n(s)},o.speak(e)})}async stop(){this.speechSynthesis||this.throwUnsupportedError(),this.speechSynthesis.cancel()}async getSupportedLanguages(){return{languages:this.getSpeechSynthesisVoices().map(i=>i.lang).filter((i,n,s)=>s.indexOf(i)==n)}}async getSupportedVoices(){return{voices:this.getSpeechSynthesisVoices()}}async isLanguageSupported(t){return{supported:(await this.getSupportedLanguages()).languages.includes(t.lang)}}async openInstall(){this.throwUnimplementedError()}createSpeechSynthesisUtterance(t){const o=this.getSpeechSynthesisVoices(),e=new SpeechSynthesisUtterance,{text:i,lang:n,rate:s,pitch:r,volume:h,voice:c}=t;return c&&(e.voice=o[c]),h&&(e.volume=h>=0&&h<=1?h:1),s&&(e.rate=s>=.1&&s<=10?s:1),r&&(e.pitch=r>=0&&r<=2?r:2),n&&(e.lang=n),e.text=i,e}getSpeechSynthesisVoices(){return this.speechSynthesis||this.throwUnsupportedError(),(!this.supportedVoices||this.supportedVoices.length<1)&&(this.supportedVoices=this.speechSynthesis.getVoices()),this.supportedVoices}throwUnsupportedError(){throw this.unavailable("SpeechSynthesis API not available in this browser.")}throwUnimplementedError(){throw this.unimplemented("Not implemented on web.")}}export{g as TextToSpeechWeb};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2ViLUJ1ckxySXRuLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQGNhcGFjaXRvci1jb21tdW5pdHkvdGV4dC10by1zcGVlY2gvZGlzdC9lc20vd2ViLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFdlYlBsdWdpbiB9IGZyb20gJ0BjYXBhY2l0b3IvY29yZSc7XG5leHBvcnQgY2xhc3MgVGV4dFRvU3BlZWNoV2ViIGV4dGVuZHMgV2ViUGx1Z2luIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zcGVlY2hTeW50aGVzaXMgPSBudWxsO1xuICAgICAgICBpZiAoJ3NwZWVjaFN5bnRoZXNpcycgaW4gd2luZG93KSB7XG4gICAgICAgICAgICB0aGlzLnNwZWVjaFN5bnRoZXNpcyA9IHdpbmRvdy5zcGVlY2hTeW50aGVzaXM7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvcCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgc3BlYWsob3B0aW9ucykge1xuICAgICAgICBpZiAoIXRoaXMuc3BlZWNoU3ludGhlc2lzKSB7XG4gICAgICAgICAgICB0aGlzLnRocm93VW5zdXBwb3J0ZWRFcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuc3RvcCgpO1xuICAgICAgICBjb25zdCBzcGVlY2hTeW50aGVzaXMgPSB0aGlzLnNwZWVjaFN5bnRoZXNpcztcbiAgICAgICAgY29uc3QgdXR0ZXJhbmNlID0gdGhpcy5jcmVhdGVTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2Uob3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB1dHRlcmFuY2Uub25lbmQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHV0dGVyYW5jZS5vbmVycm9yID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGV2ZW50KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzcGVlY2hTeW50aGVzaXMuc3BlYWsodXR0ZXJhbmNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHN0b3AoKSB7XG4gICAgICAgIGlmICghdGhpcy5zcGVlY2hTeW50aGVzaXMpIHtcbiAgICAgICAgICAgIHRoaXMudGhyb3dVbnN1cHBvcnRlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zcGVlY2hTeW50aGVzaXMuY2FuY2VsKCk7XG4gICAgfVxuICAgIGFzeW5jIGdldFN1cHBvcnRlZExhbmd1YWdlcygpIHtcbiAgICAgICAgY29uc3Qgdm9pY2VzID0gdGhpcy5nZXRTcGVlY2hTeW50aGVzaXNWb2ljZXMoKTtcbiAgICAgICAgY29uc3QgbGFuZ3VhZ2VzID0gdm9pY2VzLm1hcCgodm9pY2UpID0+IHZvaWNlLmxhbmcpO1xuICAgICAgICBjb25zdCBmaWx0ZXJlZExhbmd1YWdlcyA9IGxhbmd1YWdlcy5maWx0ZXIoKHYsIGksIGEpID0+IGEuaW5kZXhPZih2KSA9PSBpKTtcbiAgICAgICAgcmV0dXJuIHsgbGFuZ3VhZ2VzOiBmaWx0ZXJlZExhbmd1YWdlcyB9O1xuICAgIH1cbiAgICBhc3luYyBnZXRTdXBwb3J0ZWRWb2ljZXMoKSB7XG4gICAgICAgIGNvbnN0IHZvaWNlcyA9IHRoaXMuZ2V0U3BlZWNoU3ludGhlc2lzVm9pY2VzKCk7XG4gICAgICAgIHJldHVybiB7IHZvaWNlcyB9O1xuICAgIH1cbiAgICBhc3luYyBpc0xhbmd1YWdlU3VwcG9ydGVkKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5nZXRTdXBwb3J0ZWRMYW5ndWFnZXMoKTtcbiAgICAgICAgY29uc3QgaXNMYW5ndWFnZVN1cHBvcnRlZCA9IHJlc3VsdC5sYW5ndWFnZXMuaW5jbHVkZXMob3B0aW9ucy5sYW5nKTtcbiAgICAgICAgcmV0dXJuIHsgc3VwcG9ydGVkOiBpc0xhbmd1YWdlU3VwcG9ydGVkIH07XG4gICAgfVxuICAgIGFzeW5jIG9wZW5JbnN0YWxsKCkge1xuICAgICAgICB0aGlzLnRocm93VW5pbXBsZW1lbnRlZEVycm9yKCk7XG4gICAgfVxuICAgIGNyZWF0ZVNwZWVjaFN5bnRoZXNpc1V0dGVyYW5jZShvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHZvaWNlcyA9IHRoaXMuZ2V0U3BlZWNoU3ludGhlc2lzVm9pY2VzKCk7XG4gICAgICAgIGNvbnN0IHV0dGVyYW5jZSA9IG5ldyBTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UoKTtcbiAgICAgICAgY29uc3QgeyB0ZXh0LCBsYW5nLCByYXRlLCBwaXRjaCwgdm9sdW1lLCB2b2ljZSB9ID0gb3B0aW9ucztcbiAgICAgICAgaWYgKHZvaWNlKSB7XG4gICAgICAgICAgICB1dHRlcmFuY2Uudm9pY2UgPSB2b2ljZXNbdm9pY2VdO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2b2x1bWUpIHtcbiAgICAgICAgICAgIHV0dGVyYW5jZS52b2x1bWUgPSB2b2x1bWUgPj0gMCAmJiB2b2x1bWUgPD0gMSA/IHZvbHVtZSA6IDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJhdGUpIHtcbiAgICAgICAgICAgIHV0dGVyYW5jZS5yYXRlID0gcmF0ZSA+PSAwLjEgJiYgcmF0ZSA8PSAxMCA/IHJhdGUgOiAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwaXRjaCkge1xuICAgICAgICAgICAgdXR0ZXJhbmNlLnBpdGNoID0gcGl0Y2ggPj0gMCAmJiBwaXRjaCA8PSAyID8gcGl0Y2ggOiAyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsYW5nKSB7XG4gICAgICAgICAgICB1dHRlcmFuY2UubGFuZyA9IGxhbmc7XG4gICAgICAgIH1cbiAgICAgICAgdXR0ZXJhbmNlLnRleHQgPSB0ZXh0O1xuICAgICAgICByZXR1cm4gdXR0ZXJhbmNlO1xuICAgIH1cbiAgICBnZXRTcGVlY2hTeW50aGVzaXNWb2ljZXMoKSB7XG4gICAgICAgIGlmICghdGhpcy5zcGVlY2hTeW50aGVzaXMpIHtcbiAgICAgICAgICAgIHRoaXMudGhyb3dVbnN1cHBvcnRlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLnN1cHBvcnRlZFZvaWNlcyB8fCB0aGlzLnN1cHBvcnRlZFZvaWNlcy5sZW5ndGggPCAxKSB7XG4gICAgICAgICAgICB0aGlzLnN1cHBvcnRlZFZvaWNlcyA9IHRoaXMuc3BlZWNoU3ludGhlc2lzLmdldFZvaWNlcygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnN1cHBvcnRlZFZvaWNlcztcbiAgICB9XG4gICAgdGhyb3dVbnN1cHBvcnRlZEVycm9yKCkge1xuICAgICAgICB0aHJvdyB0aGlzLnVuYXZhaWxhYmxlKCdTcGVlY2hTeW50aGVzaXMgQVBJIG5vdCBhdmFpbGFibGUgaW4gdGhpcyBicm93c2VyLicpO1xuICAgIH1cbiAgICB0aHJvd1VuaW1wbGVtZW50ZWRFcnJvcigpIHtcbiAgICAgICAgdGhyb3cgdGhpcy51bmltcGxlbWVudGVkKCdOb3QgaW1wbGVtZW50ZWQgb24gd2ViLicpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdlYi5qcy5tYXAiXSwibmFtZXMiOlsiVGV4dFRvU3BlZWNoV2ViIiwiV2ViUGx1Z2luIiwib3B0aW9ucyIsInNwZWVjaFN5bnRoZXNpcyIsInV0dGVyYW5jZSIsInJlc29sdmUiLCJyZWplY3QiLCJldmVudCIsInZvaWNlIiwidiIsImkiLCJhIiwidm9pY2VzIiwidGV4dCIsImxhbmciLCJyYXRlIiwicGl0Y2giLCJ2b2x1bWUiXSwibWFwcGluZ3MiOiJ3Q0FDTyxNQUFNQSxVQUF3QkMsQ0FBVSxDQUMzQyxhQUFjLENBQ1YsTUFBSyxFQUNMLEtBQUssZ0JBQWtCLEtBQ25CLG9CQUFxQixTQUNyQixLQUFLLGdCQUFrQixPQUFPLGdCQUM5QixPQUFPLGlCQUFpQixlQUFnQixJQUFNLENBQzFDLEtBQUssS0FBSSxDQUNiLENBQUMsRUFFVCxDQUNBLE1BQU0sTUFBTUMsRUFBUyxDQUNaLEtBQUssaUJBQ04sS0FBSyxzQkFBcUIsRUFFOUIsTUFBTSxLQUFLLEtBQUksRUFDZixNQUFNQyxFQUFrQixLQUFLLGdCQUN2QkMsRUFBWSxLQUFLLCtCQUErQkYsQ0FBTyxFQUM3RCxPQUFPLElBQUksUUFBUSxDQUFDRyxFQUFTQyxJQUFXLENBQ3BDRixFQUFVLE1BQVEsSUFBTSxDQUNwQkMsRUFBTyxDQUNYLEVBQ0FELEVBQVUsUUFBV0csR0FBVSxDQUMzQkQsRUFBT0MsQ0FBSyxDQUNoQixFQUNBSixFQUFnQixNQUFNQyxDQUFTLENBQ25DLENBQUMsQ0FDTCxDQUNBLE1BQU0sTUFBTyxDQUNKLEtBQUssaUJBQ04sS0FBSyxzQkFBcUIsRUFFOUIsS0FBSyxnQkFBZ0IsT0FBTSxDQUMvQixDQUNBLE1BQU0sdUJBQXdCLENBSTFCLE1BQU8sQ0FBRSxVQUhNLEtBQUsseUJBQXdCLEVBQ25CLElBQUtJLEdBQVVBLEVBQU0sSUFBSSxFQUNkLE9BQU8sQ0FBQ0MsRUFBR0MsRUFBR0MsSUFBTUEsRUFBRSxRQUFRRixDQUFDLEdBQUtDLENBQUMsQ0FDcEMsQ0FDekMsQ0FDQSxNQUFNLG9CQUFxQixDQUV2QixNQUFPLENBQUUsT0FETSxLQUFLLHlCQUF3QixDQUM3QixDQUNuQixDQUNBLE1BQU0sb0JBQW9CUixFQUFTLENBRy9CLE1BQU8sQ0FBRSxXQUZNLE1BQU0sS0FBSyxzQkFBcUIsR0FDWixVQUFVLFNBQVNBLEVBQVEsSUFBSSxDQUMzQixDQUMzQyxDQUNBLE1BQU0sYUFBYyxDQUNoQixLQUFLLHdCQUF1QixDQUNoQyxDQUNBLCtCQUErQkEsRUFBUyxDQUNwQyxNQUFNVSxFQUFTLEtBQUsseUJBQXdCLEVBQ3RDUixFQUFZLElBQUkseUJBQ2hCLENBQUUsS0FBQVMsRUFBTSxLQUFBQyxFQUFNLEtBQUFDLEVBQU0sTUFBQUMsRUFBTyxPQUFBQyxFQUFRLE1BQUFULENBQUssRUFBS04sRUFDbkQsT0FBSU0sSUFDQUosRUFBVSxNQUFRUSxFQUFPSixDQUFLLEdBRTlCUyxJQUNBYixFQUFVLE9BQVNhLEdBQVUsR0FBS0EsR0FBVSxFQUFJQSxFQUFTLEdBRXpERixJQUNBWCxFQUFVLEtBQU9XLEdBQVEsSUFBT0EsR0FBUSxHQUFLQSxFQUFPLEdBRXBEQyxJQUNBWixFQUFVLE1BQVFZLEdBQVMsR0FBS0EsR0FBUyxFQUFJQSxFQUFRLEdBRXJERixJQUNBVixFQUFVLEtBQU9VLEdBRXJCVixFQUFVLEtBQU9TLEVBQ1ZULENBQ1gsQ0FDQSwwQkFBMkIsQ0FDdkIsT0FBSyxLQUFLLGlCQUNOLEtBQUssc0JBQXFCLEdBRTFCLENBQUMsS0FBSyxpQkFBbUIsS0FBSyxnQkFBZ0IsT0FBUyxLQUN2RCxLQUFLLGdCQUFrQixLQUFLLGdCQUFnQixVQUFTLEdBRWxELEtBQUssZUFDaEIsQ0FDQSx1QkFBd0IsQ0FDcEIsTUFBTSxLQUFLLFlBQVksb0RBQW9ELENBQy9FLENBQ0EseUJBQTBCLENBQ3RCLE1BQU0sS0FBSyxjQUFjLHlCQUF5QixDQUN0RCxDQUNKIiwieF9nb29nbGVfaWdub3JlTGlzdCI6WzBdfQ==
